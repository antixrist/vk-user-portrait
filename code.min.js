Waiter||function(){function d(a,b,g,c){var e;e=d.toArray(arguments);var h=e[4]||!1;h||(e=d._parseArgs(e),a=e.timeout,b=e.interval,g=e.condition,c=e.callback);if(!(this instanceof d))return new d(a,b,g,c,!0);this.timeout=a;this.interval=b;this.condition=g;this.callback=c;this.done=!1;this.iteration=this.elapsedTime=0;this.tstart=d.getTimeInMs();this.check()}var c=this;d._parseArgs=function(a){var b={};1==a.length?b=a[0]:(b.timeout=a[0]||!1,b.interval=a[1]||!1,b.condition=a[2]||!1,b.callback=a[3]||
!1);a={};a.timeout=parseInt(b.timeout||1,10)||1;a.interval=parseInt(b.interval||1,10)||1;a.condition="function"==typeof b.condition?b.condition:d.noopPositive;a.callback="function"==typeof b.callback?b.callback:d.noop;return a};d.prototype={constructor:d,check:function(){var a;this.iteration+=1;this.elapsedTime=d.getTimeInMs()-this.tstart;this.done||(this.elapsedTime<=this.timeout?(a=this.condition(this.elapsedTime,this.iteration,this.afterCheck.bind(this)),this.afterCheck(a)):(a=[Error(d.errText),
this.elapsedTime,this.iteration],this.runCallback.apply(this,a)))},afterCheck:function(a){var b=this,g;"undefined"!=typeof a&&(a?(b.done=!0,g=[null,b.elapsedTime,b.iteration],d.isArray(a)&&(g=g.concat(a)),b.runCallback.apply(b,g)):setTimeout(function(){b.check()},b.interval))},runCallback:function(a){"undefined"!=typeof a&&d.isArray(a)||(a=d.toArray(arguments));this.callback.apply(c,a)}};d.errText="[waiter.js] Timeout with false condition";d.noop=function(){};d.noopPositive=function(){return!0};d.getTimeInMs=
function(){Date.now||(Date.now=function(){return(new Date).getTime()});return Date.now()};d.toArray=function(a){return Array.prototype.slice.call(a,0)};d.isArray=function(a){Array.isArray||(Array.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)});return Array.isArray(a)};waiter=d;"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=waiter)}();
window.vk_portrait||function(){window.vk_portrait=!0;var d=function(b){return!isNaN(parseFloat(b))&&isFinite(b)},c=function(){var b=window.jQuery,a=Array.prototype.slice.call(arguments,0),c=a[0]||"",e=!1,h=!1,f=!1,k="[vk_portrait] ",l="";c&&("boolean"==typeof a[1]||d(a[1])?(e=!!a[1],"boolean"==typeof a[2]||d(a[2])?(h=!!a[2],f=a[3]):f=a[2]):f=a[1],f&&(b.isPlainObject(f)?l="\n"+JSON.stringify(f):b.isArray(f)&&(l="\n"+f.join("\n"))),e&&(k+="[error] "),console.info(k+c+l),f&&console.log(f),h&&alert(k+
c+l))},a=function(b,a){return Math.floor(Math.random()*(a-b+1))+b};"undefined"==typeof window.jQuery&&function(){window.setTimeout(function(){var a=document,c=a.getElementsByTagName("script")[0],a=a.createElement("script");a.type="text/javascript";a.async=!0;a.src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js?"+(new Date).getTime();c.parentNode.insertBefore(a,c)},1)}();c("Waiting jQuery...");waiter(1E4,100,function(a,c,d){return"undefined"!=typeof window.jQuery},function(b,d,r){if(b)c("jQuery load failed",
!0,!0);else{var e=window.jQuery;c("jQuery loaded!");b=function(a){a=(a||"").match(/(https?:\/\/)?(vk.com)?\/?([^\?]+)/)[3]||"";return a=parseInt(a,10)==a?"id"+a:a};var h=function(a){e(".feed_row").remove();feed.showMore();waiter(3E4,200,function(){return e(".post").length},function(b){b&&(c("No finded posts!",!0,!0),window.vk_portrait=!1);e.isFunction(a)&&a()})},f=function(){var a=[];e(".post").each(function(b,c){e(c);var d=c.id.match(/post(.+)/)[1];a.push(d)});return a},k=function(b,c){$node=e("#post"+
b);window.setTimeout(function(b,c){return function(){useScroll?useScrollAnimate?e("html,body").animate({scrollTop:$node.offset().top},a(deltaMin,deltaMax),function(){e.isFunction(c)&&c(b)}):(e("html,body").scrollTop($node.offset().top),e.isFunction(c)&&c(b)):e.isFunction(c)&&c(b)}}(b,c),a(deltaMin,deltaMax))},l=function(a){return e.isArray(a)?a.map(function(a,b){return"https://vk.com/wall"+a}):a},q=function(a,b){if(!e.isArray(a))return[];var c=[],d=0;a.forEach(function(f,g){2!=f.split("_").length?
d++:k(f,function(f){e.post("https://vk.com/like.php",{act:"a_get_stats",al:1,has_share:1,object:"wall"+f},function(f){return function(g){d++;g&&(g.match(/href[\s]?=[\s]?['"][\s]?\/(.+?)[\s]?['"]/gm).forEach(function(a,b){a.match(/href[\s]?=[\s]?['"][\s]?\/(.+?)[\s]?['"]/)[1]==m&&c.push(f)}),e.isFunction(b)&&d==a.length&&(c=c.length?e.unique(c):c,b(c)))}}(f))})})},n=[],p=function(){window.ajaxCache={};var b=f();b.length?q(b,function(b){b.length&&(b=l(b),c("finded:",b,!1,!1),n=n.concat(b));window.vk_portrait?
window.setTimeout(function(){h(function(){p()})},a(deltaMin,deltaMax)):c("Stopped!",n,!1,!0)}):c("Done!",n,!1,!0)};window.vkPortraitResolverCallback=function(a){var b=document.getElementById("vkPortraitResolver");b&&b.remove();if(a&&a.response&&"user"==a.response.type&&a.response.object_id){c("Resolved user's id: "+a.response.object_id);var d="https://vk.com/feed?section=source&source="+a.response.object_id;a.response.object_id?(c("Try to loading user's feed page..."),nav.go(d,null,{noback:!0}),waiter(5E3,
100,function(){return document.location.href==d&&e(".post").length},function(a){a?c("Fail loading feed page!",!0,!0):(c("Feed loaded! Seaching..."),p())})):c("Resolve user's fail!",!0,!0)}};var m=prompt("Enter link","");m?(m=b(m),c("User's screen name: \""+m+'"'),b=document.createElement("script"),b.id="vkPortraitResolver",b.src="https://api.vk.com/method/utils.resolveScreenName?screen_name="+m+"&v=5.35&callback=vkPortraitResolverCallback",b.onerror=function(){c("Resolve user's fail!",!0,!0)},c("Try to resolve user's id..."),
document.getElementsByTagName("head")[0].appendChild(b)):c("Link required",1,1)}})}();
